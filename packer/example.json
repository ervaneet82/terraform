{
"provisioners": [
	 {
		 "type" : "file",
		 "source" : "apache.tgz",
		 "destination" : "apache.tgz"
	 },
	 {
		 "type" : "file",
		 "source" : "chefdk_3.0.36-1_amd64.deb",
		 "destination" : "/tmp/chefdk_3.0.36-1_amd64.deb"
	 },
	 {
		 "type": "shell",
		 "inline": [
			 "sudo apt-get update",
			 "tar -xvzf apache.tgz",
			 "sudo dpkg -i /tmp/chefdk_3.0.36-1_amd64.deb",
			 "rm -f apache.tgz"
		 ]
	 },
	 {
		 "type" : "chef-solo",
		 "cookbook_paths" : ["apache"]
	 }
 ],
	"builders": [{
		"type": "amazon-ebs",
		"region": "us-east-1",
		"vpc_id" : "vpc-0b0cdf3df387f051e",
		"subnet_id" : "subnet-03a9e867d3aee3551",
		"associate_public_ip_address" : "true",
		"source_ami_filter": {
			"filters": {
				"virtualization-type": "hvm",
				"name": "ubuntu/images/*ubuntu-xenial-16.04-amd64-server-*",
				"root-device-type": "ebs"
			},
			"most_recent": true
		},
		"instance_type": "t2.micro",
		"ssh_username": "ubuntu",
		"ami_name": "packer-example {{timestamp}}",
		"launch_block_device_mappings": [{
			"device_name": "/dev/sda1",
			"volume_size": 8,
			"volume_type": "gp2",
			"delete_on_termination": true
		}]
	}]
}
